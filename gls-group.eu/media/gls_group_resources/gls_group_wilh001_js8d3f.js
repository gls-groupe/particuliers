/*! License information is available at /media/gls_group_resources/gls_group_licenses_txt.txt */(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{268:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));var n=function(t){var e;throw new Error((null===(e=t.response)||void 0===e?void 0:e.data.exceptionText)||t.message)}},269:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var n=r(0),o=r(40),i=r(3),s=r(2),c=function(t){function e(e,r){return t.call(this,e,(function(){return r}))||this}return Object(n.d)(e,t),e.prototype.rslg002=function(t,e,r){return void 0===e&&(e="body"),Object(n.b)(this,void 0,void 0,(function(){var o,i;return Object(n.e)(this,(function(s){return o=Date.now(),i=window.GLS.api.endpoints.get("rslg002")||"/",[2,this.get(i,{caller:t,millis:o},e,Object(n.a)(Object(n.a)({},r),{baseURL:"/",method:"get",url:i}))]}))}))},e.prototype.rslg004=function(t,e,r,o){return void 0===r&&(r="body"),Object(n.b)(this,void 0,void 0,(function(){var i;return Object(n.e)(this,(function(n){return i=Date.now(),[2,this.post("rslg004",{caller:e,millis:i},t,r,o)]}))}))},e.prototype.rslg015=function(t,e,r){return void 0===e&&(e="body"),Object(n.b)(this,void 0,void 0,(function(){var o;return Object(n.e)(this,(function(n){return o=Date.now(),[2,this.get("rslg015",{caller:t,millis:o},e,r)]}))}))},e.prototype.rslg003=function(t,e,r,o){return void 0===r&&(r="body"),Object(n.b)(this,void 0,void 0,(function(){var i;return Object(n.e)(this,(function(n){return i=Date.now(),[2,this.post("rslg003",{caller:e,millis:i},t,r,o)]}))}))},e.instance=new e(i.a,window.GLS.api.prefixes.get(s.d)||"/"),e}(o.a).instance},283:function(t,e,r){"use strict";r.r(e),r.d(e,"Wilh001",(function(){return m}));var n=r(0),o=r(268),i=r(269),s=function(){function t(t){this.api=t}return t.prototype.checkUser=function(t){return this.api.rslg004(t,"wilh001").catch(o.a)},t.prototype.checkLogin=function(){return this.api.rslg015("wilh001").catch(o.a)},t.prototype.logout=function(){return this.api.rslg002("wilh001").catch(o.a)},t.instance=new t(i.a),t}().instance,c=r(300),u=new(function(){function t(t){this.service=t}return t.prototype.initialize=function(){var t=this;return function(e){return Object(n.b)(t,void 0,void 0,(function(){var t;return Object(n.e)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.service.checkLogin()];case 1:return t=r.sent(),e(this.showMenu(t.system)),[3,3];case 2:return r.sent(),e(this.showForm()),[3,3];case 3:return[2]}}))}))}},t.prototype.showMenu=function(t){return{type:"SHOW_MENU",payload:{system:t}}},t.prototype.showForm=function(){return{type:"SHOW_FORM"}},t.prototype.submit=function(t){var e=this;return function(r){return Object(n.b)(e,void 0,void 0,(function(){var e,o,i;return Object(n.e)(this,(function(n){switch(n.label){case 0:r(this.submitting(t)),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.service.checkUser(t)];case 2:return e=n.sent(),o=Object(c.b)("form",{method:"POST",action:e.loginurl}),Object(c.d)(o,Object(c.c)("hidden",e.newWorldUser?"username":"txtOpenAreaLoginUserName",t.username),Object(c.c)("hidden",e.newWorldUser?"password":"txtOpenAreaLoginPassword",t.password)),e.newWorldUser||Object(c.d)(o,Object(c.c)("hidden","txtAction","70340"),Object(c.c)("hidden","method",""),Object(c.c)("hidden","getColumn",""),Object(c.c)("hidden","searchNextPage","")),Object(c.d)(document.body,o),o.submit(),[3,4];case 3:return i=n.sent(),r(this.submitFailure(i.message)),[3,4];case 4:return[2]}}))}))}},t.prototype.submitting=function(t){return{type:"SUBMIT_FORM_STARTED",payload:{data:{username:t.username,password:t.password}}}},t.prototype.submitFailure=function(t){return{type:"SUBMIT_FORM_FAILURE",payload:{errorMessage:t}}},t.prototype.logout=function(){var t=this;return function(e){return Object(n.b)(t,void 0,void 0,(function(){return Object(n.e)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,,2,3]),[4,this.service.logout()];case 1:return t.sent(),[3,3];case 2:return e(this.showForm()),[7];case 3:return[2]}}))}))}},t}())(s),a=function(t){return t.system},l=r(287),d={submitting:!1,system:"",data:{},isNewWorldUser:!1,loginUrl:"",errorMessage:void 0},p=Object(l.a)((function(t,e){switch(void 0===t&&(t=d),e.type){case"SHOW_FORM":return Object(n.a)(Object(n.a)({},t),{system:""});case"SHOW_MENU":return Object(n.a)(Object(n.a)({},t),{system:e.payload.system});case"SUBMIT_FORM_STARTED":return Object(n.a)(Object(n.a)({},t),{errorMessage:void 0,data:{username:e.payload.data.username,password:e.payload.data.password},submitting:!0});case"SUBMIT_FORM_FAILURE":return Object(n.a)(Object(n.a)({},t),{errorMessage:e.payload.errorMessage,data:{username:t.data.username,password:""},submitting:!1});default:return t}})),h=r(306),b=r(309),f=r(307),y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.handleFormSuccess=function(t){e.dispatch(u.submit(Object(h.a)(t)))},e}return Object(n.d)(e,t),e.prototype.context=function(){var t=this.getState(),e=function(t){return t.data}(t),r=function(t){return t.isNewWorldUser}(t),n=function(t){return t.loginUrl}(t);return{errorMessage:function(t){return t.errorMessage}(t),data:e,newWorldUser:r,loginUrl:n,submitting:function(t){return t.submitting}(t)}},e.prototype.display=function(e){return Object(n.b)(this,void 0,void 0,(function(){var r,o;return Object(n.e)(this,(function(n){switch(n.label){case 0:return[4,t.prototype.display.call(this,e)];case 1:return r=n.sent(),o=r.querySelector("form"),this.formHandler=b.a.builder(o).withSuccessCallback(this.handleFormSuccess).build(),[2,r]}}))}))},e.prototype.init=function(){},e.prototype.destroy=function(){return Object(n.b)(this,void 0,void 0,(function(){return Object(n.e)(this,(function(e){return[2,t.prototype.destroy.call(this)]}))}))},e}(f.a),g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.runPoll=function(){s.checkLogin().then((function(t){e.pollLogout()})).catch((function(t){e.stopPoll(),e.dispatch(u.showForm())}))},e.stopPoll=function(){e.poll&&(window.clearTimeout(e.poll),e.poll=void 0)},e.pollLogout=function(){e.poll=window.setTimeout((function(){e.runPoll()}),18e4)},e}return Object(n.d)(e,t),e.prototype.context=function(){var t=a(this.getState());return{YourGLS:"YourGLS"===t,EasyStart:"Easy Start"===t,system:t}},e.prototype.init=function(){var t=this;jQuery(this.container).on("click",".js-logout",(function(e){e.currentTarget.classList.add("loading"),e.currentTarget.setAttribute("disabled",""),t.dispatch(u.logout())}))},e.prototype.display=function(e){return Object(n.b)(this,void 0,void 0,(function(){var r;return Object(n.e)(this,(function(n){switch(n.label){case 0:return[4,t.prototype.display.call(this,e)];case 1:return r=n.sent(),this.pollLogout(),[2,r]}}))}))},e.prototype.destroy=function(){return Object(n.b)(this,void 0,void 0,(function(){return Object(n.e)(this,(function(e){return this.stopPoll(),[2,t.prototype.destroy.call(this)]}))}))},e}(f.a),O=r(305),m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(n.d)(e,t),e.prototype.display=function(){return this.dispatch(u.initialize()),Promise.resolve()},e.prototype.init=function(){var t=this;this.store.subscribe((function(){var e=t.getState();if(function(t){return""!==t.system}(e)){if(t.dataset.loginTriggerSelector){var r=document.querySelector(t.dataset.loginTriggerSelector);r&&Object(c.e)(r,a(e))}t.mainSlot(t.menuMode).catch(console.error)}else t.dataset.modalSelector&&jQuery(t.dataset.modalSelector).on("shown.bs.modal",(function(){var e=t.querySelector("input");e&&e.focus()})),t.mainSlot(t.loginMode).catch(console.error)}))},Object(n.c)([Object(O.b)({factory:y,template:"login"})],e.prototype,"loginMode",void 0),Object(n.c)([Object(O.b)({factory:g,template:"menu"})],e.prototype,"menuMode",void 0),e=Object(n.c)([Object(O.a)({tagName:"wdg-wilh001",reducer:p})],e)}(r(308).a)}},[[283,0,1]]]);